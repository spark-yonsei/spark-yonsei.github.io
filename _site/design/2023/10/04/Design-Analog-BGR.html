<!DOCTYPE html>
<html lang="en"><head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Seil Park" /></head>
<style>@import url(/public/css/syntax/monokai.css);</style>
  <title>Seil Park</title>
  <!-- <link href="/public/css/bootstrap.min.css" rel="stylesheet"> -->

  <link href="/public/css/style.css" rel="stylesheet">
  <body>
  	<div class="container"> 
		<div class="sidebar">
			<div class="sidebar-item sidebar-header">
	<div class='sidebar-brand'>
		<a href="/">Seil Park</a>
	</div>
	<p class="lead"></p></div>

<div class="sidebar-item sidebar-nav">
	<ul class="nav">
      <li class="nav-title" style="text-align: center;">Introduction</li>
	  <li>
	  	<a class="nav-item" href="/">CV</a>
	  </li>
	  <li>
		<a class="nav-item" href="/research">Research</a>
	  </li>
	</ul>
</div>

<div class="sidebar-item sidebar-nav">
  	<ul class="nav">
			<li class="nav-title" style="text-align: center;">Articles</li>
		
	    <li>
	    	<a class="nav-item" href="/category/#Design">
				<span class="name">Design</span>
				<span class="badge">22</span>
	    	</a>
 		</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#Market">
				<span class="name">Market</span>
				<span class="badge">17</span>
	    	</a>
 		</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#Process">
				<span class="name">Process</span>
				<span class="badge">20</span>
	    	</a>
 		</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#Electromagnetics">
				<span class="name">Electromagnetics</span>
				<span class="badge">6</span>
	    	</a>
 		</li>
	    
	  </nav>
	</ul>
</div>

<div class="sidebar-item sidebar-footer">
	<p>Powered by <a href="https://github.com/jekyll/jekyll">Jekyll</a></p>
</div>

		</div>
		<div class="content">
			<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
<article class="post">
	<header class="post-header">
		<div class="post-title"> 
			Analog - BGR
		</div>
		<time class="post-date dt-published" datetime="2023-10-04T19:31:29+09:00" itemprop="datePublished">2023/10/04
		</time>		
	</header>

	<div class="post-content">
		<p>BGR: Bandgap Reference</p>

<p>BGR은 PVT Variation에 영향받지 않고 일정한 전압을 출력하기 위한 회로다.</p>

<p>BGR에는 3종류가 있다.
BJT BGR,
MOSFET BGR,
2TR BGR</p>

<p>BJT BGR:</p>

<p>Parasitic BJT를 쓰는 경우도 많다.</p>

<p>MOSFET BGR:
Weak inversion region을 쓴다.</p>

<p>2TR BGR:
Native Transistor를 쓴다.</p>

<p>BJT BGR의 장점:
Process Variation이 작다.</p>

<p>BJT BGR의 단점:
BJT, 저항이 쓰이기 때문에 면적이 많이 필요하다. 즉 비싸다.
matching이 잘 된 저항을 써야 하기 때문에 면적이 많이 필요하다.</p>

<p>MOSFET BGR의 장점:</p>

<p>MOSFET BGR의 단점:
matching이 잘 된 저항을 써야 하기 때문에 면적이 많이 필요하다.</p>

<p>2TR BGR의 장점:
구조가 간단하다.</p>

<p>2TR BGR의 단점:
Process Variation이 크다.</p>

<p>Bandgap Voltage Reference는 PVT variation이나 loading 상황에 관계없이 일정한 전압을 주려고 쓴다.</p>

<p>그리고 noise, precision specification을 원하는 수준까지 올리려면 power가 많이 필요할 수 있다.</p>

<p>bandgap에는 3종류가 있다.
BJT, MOSFET, 2TR</p>

<p>2TR은 NMOS 2개로 Bandgap을 만든 경우고, power 소비가 적어야 할때 쓴다.</p>

<p>MOSFET으로 bandgap을 만들때에는 weak inversion region을 쓴다. BJT처럼 exponential하니까.</p>

<p>그 외 회로에서도 power를 적게 써야 할 때 가끔 weak inversion region을 쓴다.</p>

<p>weak inversion region은 gm이 부족하지 않나?
이건 W 키우면 된다.
그럼 면적 손해가 일어나지 않나?
L 줄이면 된다.</p>

<p>캐패시턴스가 작을수록 트랜지스터의 f_T가 크다.
전압을 크게 넣으면 f_T가 커진다는 어조로 적혀있는데, 이거 확인좀</p>

<p>왜 MOS로 bandgap 많이 안만들고 BJT 쓰냐?
MOS로 만들면 공정 variation이 좀 크다.</p>

<p>Bandgap referenceㄹ르 만드는, 널리 쓰이는 방법중 하나는 parasitic BJT를 쓰는 방식이다.
이 방식에서는 PTAT 전압과 CTAT 전압을 더해 bandgap reference를 만든다.
그 외에 PTAT 전류와 CTAT 전류를 더할수도 있고, 뭐 다양한 방법들이 있다.</p>

<p>대부분의 기존 design들은 error correction을 위해 amplifier를 쓴다.
amplifier를 쓰면 온도랑 supply voltage에 둔감해지긴 하는데,
amplifier는 power도 많이 먹고 면적도 많이 먹는다.</p>

<p>amplifier를 안쓰는 design들도 있긴 하다.
이 경우에는 MOSFET을 saturation mode로 쓰기 때문에, MOSFET이 power를 많이 먹는다.</p>

<p>근데, amplifier든 saturated device든 voltage headroom이 필요하다.
그래서 이런걸 쓰면 supply voltage 내리는 데에 한계가 있다.</p>

<p>게다가, 이런 design들은 온도에 둔감한 전압 출력을 위해 matching이 잘된 저항들을 필요로 하기에,
면적이 넓은 저항들을 써야 한다. 그래서 면적 손해를 본다.</p>

<p>그래서, 여기서 제시하는 구조는 amp도 없고, saturated device도 없고, 저항도 없는 구조다.
이 구조는 power consumption이 작기 때문에 power를 아끼기 위한 duty cycling도 필요 없고, startup도 필요 없다.
는 내용이 ‘A portable 2-Transistor Picowatt Temperature-Compensated Voltage Reference Operating at 0.5V’의 내용이다.</p>

<p>신기하게도 MOSFET 2개만으로 만들 수 있는 Voltage Reference다.<br />
아무 MOSFET으로나 되는건 아니고, 하나는 Enhancement MOSFET, 하나는 Native 또는 Depletion MOSFET이 필요하다.<br />
<br />
2TR BGR 관련 특허들은 일본의 배터리 protection 회로 관련 회사들이 많이 냈다.<br />
<br />
Native 또는 Depletion MOSFET을 쓰면 공정시 layer가 하나 더 필요하다.<br />
Body가 무조건 ground에 연결되어야 하기 때문이다.<br />
<br />
두가지 구조가 있다.<br />
첫번째 구조부터 보면:<br />
<br /></p>
<div>
    <img src="/public/img/2tr1.png" style="width: 15%; height: auto;" alt="my picture" />
</div>
<p><br />
<br />
위쪽은 native TR이라, \(V_{th}\)가 0보다 약간 작다.<br />
그래서 M1은 항상 켜져있다.  \(V_{GS1}\)=0인데 \(V_{th1}\)는 0보다 약간 작으니까.<br />
<br />
<br />
그리고 2개 트랜지스터에 흐르는 전류는 동일하니까:<br />
\(I_{1}=\dfrac{1}{2} \mu_{n} C_{ox} \dfrac{W_1}{L_1} \left(-V_{th1} \right)^{2}\)<br />
<br />
\(I_{2}=\dfrac{1}{2} \mu_{n} C_{ox} \dfrac{W_2}{L_2} \left(V_{GS2}-V_{th2} \right)^{2}\)<br />
<br />
여기서 \(I_{1}=I_{2}\)으로 놓고 정리하면:<br />
\(V_{out} = V_{GS2} = V_{th2} - \sqrt{\dfrac{W_1L_2}{L_1W_2}} \cdot V_{th1}\)<br />
<br />
우변은 다 트랜지스터 구조에 의해 결정되는 값들이라, 이 구조에서 \(V_{GS2}\)도 하나의 값으로 정해지게 된다.<br />
<br />
여기까지는 좋은데, 우린 이걸 BGR로 쓰고싶은거니까 온도가 변해도 전압이 일정하다는걸 확인해야 한다.<br />
온도가 변하면 \(V_{th1}, V_{th2}\)이 변한다.<br />
<br />
\(\dfrac{\partial V_{out}}{\partial T} = \dfrac{\partial V_{th2}}{\partial T} - \sqrt{\dfrac{W_1L_2}{L_1W_2}} \cdot \dfrac{\partial V_{th1}}{\partial T}\)<br />
<br />
이 회로가 Voltage Reference로 동작하려면, \(\dfrac{\partial V_{out}}{\partial T}=0\)이 되어야 한다.<br />
즉, \(\dfrac{\partial V_{th2}}{\partial T} - \sqrt{\dfrac{W_1L_2}{L_1W_2}} \cdot \dfrac{\partial V_{th1}}{\partial T}=0\)이 0이 되도록 트랜지스터 크기 \(\left(W_{1}, W_{2}, L_{1}, L_{2}\right)\)를 잘 조절해주면 된다.<br />
<br />
잘 조절하면 \(\dfrac{\partial V_{out}}{\partial T}=0\)이 된다.<br />
이렇게 만들면 된다.<br />
<br />
<br />
<br />
<br />
<br />
두번째 구조:<br />
<br /></p>
<div>
    <img src="/public/img/2tr2.png" style="width: 20%; height: auto;" alt="my picture" />
</div>
<p><br /></p>

	</div>
</article>
		</div>
	</div>
  </body>
</html>